(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{1469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return n}});let r=s(8229),l=s(8883),a=s(3063),i=r._(s(1193));function n(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/petshop/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=a.Image},2311:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(5155),l=s(142),a=s(6874),i=s.n(a);let n=()=>(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl xl:text-[64px] font-bold mb-8 md:mb-10 xl:mb-15",children:"Корзина"}),(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Ваша корзина пуста"}),(0,r.jsx)(i(),{href:"/",className:"inline-block bg-secondary text-white px-6 py-2 rounded hover:bg-primary transition-colors",children:"Вернуться к покупкам"})]})]}),c=e=>{let{itemCount:t}=e;return(0,r.jsxs)("div",{className:"relative w-full max-w-[336px] md:w-[336px] h-24",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl xl:text-[64px] font-bold mb-8 md:mb-10 xl:mb-15",children:"Корзина"}),t>0&&(0,r.jsx)("div",{className:"absolute ml-5 -top-4 right-33 md:right-20 xl:right-0 bg-secondary rounded px-2 py-1",children:(0,r.jsx)("span",{className:"text-base text-white",children:t})})]})},d=e=>{let{item:t}=e,{cartItems:s,updateCart:a,getCartProducts:i}=(0,l.x)(),n=(e,t)=>{if(t<1)return;let r=i().find(t=>t.productId===e);if(r&&t>r.product.quantity)return void alert("Доступно только ".concat(r.product.quantity," шт."));a(s.map(s=>s.productId===e?{...s,quantity:t}:s))};return(0,r.jsxs)("div",{className:"flex items-center border rounded",children:[(0,r.jsx)("button",{onClick:()=>n(t.productId,t.quantity-1),className:"px-3 py-1 hover:bg-gray-100 transition-colors",disabled:t.quantity<=1,children:"-"}),(0,r.jsx)("span",{className:"px-4 py-1",children:t.quantity}),(0,r.jsx)("button",{onClick:()=>n(t.productId,t.quantity+1),className:"px-3 py-1 hover:bg-gray-100 transition-colors",disabled:t.quantity>=t.product.quantity,children:"+"})]})};var o=s(6766);let x=e=>{let{img:t,title:s}=e;return(0,r.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded flex items-center justify-center relative",children:(0,r.jsx)(o.default,{src:t,alt:s,fill:!0,className:"object-cover rounded"})})},u=e=>{let{item:t,finalPrice:s,cardPrice:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[t.product.discountPercent>0&&(0,r.jsxs)("span",{className:"text-tertiary line-through text-sm",children:[t.product.basePrice," руб."]}),(0,r.jsxs)("span",{className:"text-secondary font-semibold",children:[s.toFixed(2)," руб."]}),t.product.discountPercent>0&&(0,r.jsxs)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs",children:["-",t.product.discountPercent,"%"]})]}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsxs)("span",{className:"text-tertiary text-sm font-semibold",children:[l.toFixed(2)," руб. с картой"]})})]})},m=()=>{let{removeFromCart:e,getCartProducts:t,hasCard:s}=(0,l.x)(),a=t();return(0,r.jsx)("div",{className:"lg:w-2/3",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:a.map(t=>{let l=t.product.basePrice*(1-t.product.discountPercent/100),a=.94*(t.product.basePrice*(1-t.product.discountPercent/100));return(0,r.jsx)("div",{className:"border-b last:border-b-0 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between flex-col md:flex-row lg:flex-row",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(x,{img:t.product.img,title:t.product.title}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:t.product.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:t.product.description}),(0,r.jsx)(u,{item:t,finalPrice:l,cardPrice:a})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(d,{item:t}),(0,r.jsxs)("div",{className:"text-right min-w-[120px]",children:[(0,r.jsxs)("p",{className:"font-semibold text-lg",children:[(l*t.quantity).toFixed(2)," руб."]}),s&&(0,r.jsxs)("p",{className:"text-tertiary text-sm font-semibold",children:[(a*t.quantity).toFixed(2)," руб."]})]}),(0,r.jsx)("button",{onClick:()=>{e(t.productId)},className:"text-red-800 hover:text-red-600 transition-colors p-2",children:"✕"})]})]})},t.productId)})})})},p=()=>{let{hasCard:e,toggleCard:t}=(0,l.x)();return(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"font-semibold",children:"У меня есть карта"}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:e,onChange:t,className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full   peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px]   after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all   peer-checked:bg-primary"})]})]})},h=()=>{let{getCartSummary:e,hasCard:t}=(0,l.x)(),s=e();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["Товары (",s.totalItems," шт.)"]}),(0,r.jsxs)("span",{children:[s.baseTotal.toFixed(2)," руб."]})]}),s.productDiscount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-tertiary",children:[(0,r.jsx)("span",{children:"Скидка на товары"}),(0,r.jsxs)("span",{children:["-",s.productDiscount.toFixed(2)," руб."]})]}),t&&s.cardDiscount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-tertiary",children:[(0,r.jsx)("span",{children:"Скидка по карте (7%)"}),(0,r.jsxs)("span",{children:["-",s.cardDiscount.toFixed(2)," руб."]})]}),(0,r.jsxs)("div",{className:"border-t pt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,r.jsx)("span",{children:"Итого"}),(0,r.jsxs)("span",{children:[s.finalTotal.toFixed(2)," руб."]})]}),t&&(0,r.jsxs)("div",{className:"text-tertiary text-sm mt-1",children:["Вы экономите ",(s.productDiscount+s.cardDiscount).toFixed(2)," руб."]})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Начислим бонусов:"}),(0,r.jsxs)("span",{className:"text-blue-600 font-bold",children:[s.bonuses.toFixed(2)," бон."]})]})})]})},b=()=>{let{clearCart:e}=(0,l.x)();return(0,r.jsx)("div",{className:"lg:w-1/3",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-4",children:[(0,r.jsx)(p,{}),(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Итог заказа"}),(0,r.jsx)(h,{}),(0,r.jsx)("button",{onClick:e,className:"w-full bg-primary text-white py-3 rounded hover:bg-secondary transition-colors font-semibold",children:"Оформить заказ"})]})})},f=()=>{let{totalItems:e,clearCart:t,getCartProducts:s}=(0,l.x)();return 0===s().length?(0,r.jsx)(n,{}):(0,r.jsxs)("div",{className:"px-[max(12px,calc((100%-1208px)/2))] md:px-[max(16px,calc((100%-1208px)/2))] text-main-text mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)(c,{itemCount:e}),(0,r.jsx)("button",{onClick:t,className:"text-secondary hover:text-red-500 transition-colors",children:"Очистить корзину"})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)(m,{}),(0,r.jsx)(b,{})]}),(0,r.jsx)("div",{className:"m-4 text-center",children:(0,r.jsx)(i(),{href:"/",className:"inline-block text-secondary hover:text-red-500 transition-colors",children:"← Продолжить покупки"})})]})}},5453:(e,t,s)=>{"use strict";s.d(t,{v:()=>i});var r=s(2115);let l=e=>{let t,s=new Set,r=(e,r)=>{let l="function"==typeof e?e(t):e;if(!Object.is(l,t)){let e=t;t=(null!=r?r:"object"!=typeof l||null===l)?l:Object.assign({},t,l),s.forEach(s=>s(t,e))}},l=()=>t,a={setState:r,getState:l,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e))},i=t=e(r,l,a);return a},a=e=>{let t=(e=>e?l(e):l)(e),s=e=>(function(e,t=e=>e){let s=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},i=e=>e?a(e):a},6766:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var r=s(1469),l=s.n(r)},7265:(e,t,s)=>{Promise.resolve().then(s.bind(s,2311))}},e=>{e.O(0,[63,874,142,441,964,358],()=>e(e.s=7265)),_N_E=e.O()}]);